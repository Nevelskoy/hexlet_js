# Основные команды git

Добавление в репозиторий происходит в два шага
1) Файлы попадают в индекс:
```
git add <путь до файла>
```
2) Эта операция, которая берет все подготовленные изменения (они могут включать любое количество файлов) и отправляет их в репозиторий как единое целое:
```
git commit -m '<message>'
```
* Cписок всех выполненных коммитов, отсортированных по дате добавления (сверху самые последние):
```
git log
```
* Выводит файл и рядом с каждой строчкой показывает того, кто ее менял и в каком коммите:
```
git blame <путь до файла>
```
* Ищет совпадение с указанной строкой во всех файлах проекта (знает про игнорирование и не смотрит в директорию .git, а еще умеет искать по истории):
```
git grep
```
* Если создали новые файлы в репозитории, но еще не проиндексировали их и хотим избавиться от них. Git удалит Untracked files (-f – force, -d – directory):
```
git clean -fd
```
* Отменяем изменения в файле в рабочей директории, до индексации:
```
git restore <путь до файла>
```
* Если измения уже проиндексированны, но мы хотим отменить индексацию:
```
git restore --staged <путь до файла>
```

# Хорошие практики git

* Стандартный способ работы с индексом — это добавление или изменение файлов и последующий коммит:
```
git add somefile
git commit -m 'add somefile'
```
* Если речь идет про один-два файла, которые нужно закоммитить прямо сейчас, то можно сделать проще.
```
echo 'new data' >> INFO.md
git commit INFO.md -m 'update INFO.md'
```
* Перед каждым коммитом желательно смотерть изменения:
```
git diff --staged
```
* С другой стороны, нередко разные изменения делаются в одних и тех же файлах. То есть изменения в этих файлах по-хорошему должны находиться в разных коммитах. Для этого подходит команда:
```
git add -i
```

# Ситуации git

Крайне часто разработчики делают коммит и сразу понимают, что забыли добавить часть файлов через git add. Оставшуюся часть изменений можно дослать следующим коммитом либо, если изменения еще не были отправлены во внешнюю систему, можно добавить изменения в текущий коммит. Для этого во время коммита добавляется флаг --amend
```
git commit --amend
git commit --amend --no-edit - чтобы не открывался редактор для ввода описания коммита
```

# Продвинутый git
1) Отмена изменений. Фактически она сводится к созданию еще одного коммита, который выполняет изменения, противоположные тому коммиту, который отменяется.
Если коммит был отправлен во внешний репозиторий, например, на GitHub, то менять историю ни в коем случае нельзя, это сломает работу у тех, кто работает с вами над проектом.
```
git revert <хэш коммита>
```
2) Мощная команда, имеющая множество различных флагов и способов работы. С ее помощью удаляются или отменяются (без удаления) коммиты, восстанавливаются файлы из истории и так далее:
```
git reset
```
3) Флаг --hard означает полное удаление. Без него git reset отменит коммит, но не удалит его, а поместит все изменения этого коммита в рабочую директорию, так что с ними можно будет продолжить работать. HEAD~ означает "один коммит от последнего коммита".
```
git reset --hard HEAD~
```
